<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Download the elevation .tif files that intersect either with an input sf (simple features) object or with a .geojson file — aoi_geom_save_tif_matches • CopernicusDEM</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Download the elevation .tif files that intersect either with an input sf (simple features) object or with a .geojson file — aoi_geom_save_tif_matches"><meta property="og:description" content="Download the elevation .tif files that intersect either with an input sf (simple features) object or with a .geojson file"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">CopernicusDEM</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">1.0.2</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li>
      <a href="../articles/Copernicus_Digital_Elevation_Models.html">Copernicus Digital Elevation Models (an example use case)</a>
    </li>
  </ul></li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://github.com/mlampros/CopernicusDEM/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Download the elevation .tif files that intersect either with an input sf (simple features) object or with a .geojson file</h1>
    <small class="dont-index">Source: <a href="https://github.com/mlampros/CopernicusDEM/blob/HEAD/R/utils.R" class="external-link"><code>R/utils.R</code></a></small>
    <div class="hidden name"><code>aoi_geom_save_tif_matches.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Download the elevation .tif files that intersect either with an input sf (simple features) object or with a .geojson file</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="fu">aoi_geom_save_tif_matches</span><span class="op">(</span>
  <span class="va">sf_or_file</span>,
  <span class="va">dir_save_tifs</span>,
  resolution <span class="op">=</span> <span class="fl">90</span>,
  crs_value <span class="op">=</span> <span class="fl">4326</span>,
  threads <span class="op">=</span> <span class="fu">parallel</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/r/parallel/detectCores.html" class="external-link">detectCores</a></span><span class="op">(</span><span class="op">)</span>,
  verbose <span class="op">=</span> <span class="cn">FALSE</span>
<span class="op">)</span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>
    <dl><dt>sf_or_file</dt>
<dd><p>either an 'sf'(simple features) object or a .geojson file specifying the AOI (Area of Interest) for which the Digital Elevation Models (DEM) files should be downloaded</p></dd>


<dt>dir_save_tifs</dt>
<dd><p>a valid path to a directory where the .tif files should be saved</p></dd>


<dt>resolution</dt>
<dd><p>an integer value specifying the elevation resolution. The Copernicus Digital ELevation Models (DEM) currently include 90 and 30 meter resolution data</p></dd>


<dt>crs_value</dt>
<dd><p>an integer value specifying the Coordinates Reference System (CRS) value of the Digital ELevation Models (DEM) which is by default 4326</p></dd>


<dt>threads</dt>
<dd><p>an integer that specifies the number of threads to use in parallel when downloading the .tif files</p></dd>


<dt>verbose</dt>
<dd><p>a boolean. If TRUE then information will be printed out in the console</p></dd>

</dl></div>
    <div id="value">
    <h2>Value</h2>
    

<p>a list object of length 2</p>
    </div>
    <div id="details">
    <h2>Details</h2>
    <p>Download Computation time: Based on a sample of 90 meter resolution images that I downloaded each file was approximately 5 MB which means in total I had to download 130 GB of
data (in case I intended to download all 20.000 files of the land areas worldwide). Therefore it is wise to download data based on the intersection of the input Area of Interest (AOI)
and an existing tile-grid of the Digital Elevation Model (DEM)</p>
<p>The 30 meter resolution .tif images are bigger in size but visually better (approximate image size of 1.7 MB compared to 13 MB). The time to download 90 meter resolution data is approximately
20 seconds compared to 1 minute and 10 seconds of the 30 meter resolution data (for a sample use case)</p>
    </div>
    <div id="references">
    <h2>References</h2>
    <p>https://registry.opendata.aws/copernicus-dem/</p>
<p>https://copernicus-dem-30m.s3.amazonaws.com/readme.html</p>
    </div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"></span>
<span class="r-in"><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="co">#.......................................</span></span>
<span class="r-in"><span class="co"># create a directory to save the .tif</span></span>
<span class="r-in"><span class="co"># files based on a Well Known Text (WKT)</span></span>
<span class="r-in"><span class="co"># of a sample Area of Interest (AOI)</span></span>
<span class="r-in"><span class="co">#.......................................</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="va">DIR_SAVE</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/Sys.getenv.html" class="external-link">Sys.getenv</a></span><span class="op">(</span><span class="st">'HOME'</span><span class="op">)</span>, <span class="st">'DIR_SAVE_DEM'</span><span class="op">)</span></span>
<span class="r-in"><span class="kw">if</span> <span class="op">(</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/files2.html" class="external-link">dir.exists</a></span><span class="op">(</span><span class="va">DIR_SAVE</span><span class="op">)</span><span class="op">)</span> <span class="fu"><a href="https://rdrr.io/r/base/files2.html" class="external-link">dir.create</a></span><span class="op">(</span><span class="va">DIR_SAVE</span><span class="op">)</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="va">WKT</span><span class="op">=</span><span class="st">'POLYGON((61.5234 27.0591, 63.6328 27.0591, 63.6328 28.1495, 61.5234 28.1495, 61.5234 27.0591))'</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="va">sf_obj</span> <span class="op">=</span> <span class="fu">sf</span><span class="fu">::</span><span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_as_sfc.html" class="external-link">st_as_sfc</a></span><span class="op">(</span><span class="va">WKT</span>, crs <span class="op">=</span> <span class="fl">4326</span><span class="op">)</span></span>
<span class="r-in"><span class="va">sf_obj</span> <span class="op">=</span> <span class="fu">sf</span><span class="fu">::</span><span class="fu"><a href="https://r-spatial.github.io/sf/reference/valid.html" class="external-link">st_make_valid</a></span><span class="op">(</span><span class="va">sf_obj</span><span class="op">)</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="co">#.............</span></span>
<span class="r-in"><span class="co"># 90 meter DEM</span></span>
<span class="r-in"><span class="co">#.............</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="va">save_matches</span> <span class="op">=</span> <span class="fu">CopernicusDEM</span><span class="fu">::</span><span class="fu">aoi_geom_save_tif_matches</span><span class="op">(</span>sf_or_file <span class="op">=</span> <span class="va">sf_obj</span>,</span>
<span class="r-in">                                                        dir_save_tifs <span class="op">=</span> <span class="va">DIR_SAVE</span>,</span>
<span class="r-in">                                                        resolution <span class="op">=</span> <span class="fl">90</span>,</span>
<span class="r-in">                                                        crs_value <span class="op">=</span> <span class="fl">4326</span>,</span>
<span class="r-in">                                                        threads <span class="op">=</span> <span class="fu">parallel</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/r/parallel/detectCores.html" class="external-link">detectCores</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span class="r-in">                                                        verbose <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="co">#.............</span></span>
<span class="r-in"><span class="co"># 30 meter DEM</span></span>
<span class="r-in"><span class="co">#.............</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="va">save_matches</span> <span class="op">=</span> <span class="fu">CopernicusDEM</span><span class="fu">::</span><span class="fu">aoi_geom_save_tif_matches</span><span class="op">(</span>sf_or_file <span class="op">=</span> <span class="va">sf_obj</span>,</span>
<span class="r-in">                                                        dir_save_tifs <span class="op">=</span> <span class="va">DIR_SAVE</span>,</span>
<span class="r-in">                                                        resolution <span class="op">=</span> <span class="fl">30</span>,</span>
<span class="r-in">                                                        crs_value <span class="op">=</span> <span class="fl">4326</span>,</span>
<span class="r-in">                                                        threads <span class="op">=</span> <span class="fu">parallel</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/r/parallel/detectCores.html" class="external-link">detectCores</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span class="r-in">                                                        verbose <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span class="r-in"><span class="op">}</span></span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Lampros Mouselimis.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.5.</p>
</div>

      </footer></div>

  


  

  </body></html>

